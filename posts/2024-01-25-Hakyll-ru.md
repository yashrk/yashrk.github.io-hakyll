---
title: Разбираюсь с Hakyll
published: 2024-01-25
modified: 2024-01-25
snippetImage: /images/posts/2024-01-25-Hakyll-logo.png
tldr: Разбираюсь с Hakyll, это интересно
tags: Haskell, Hakyll, сайт
keywords: Haskell, Hakyll, сайт
---

Несколько лет назад я завёл этот сайт просто чтобы разобраться с GitHub Pages. И генератор HTML выбирал по принципу «ну, чтобы было не противно». Под руку первым попался [Hakyll](https://jaspervdj.be/hakyll/) — конфигурируется вроде просто, язык симпатичный (хотя Haskell я в то время почти не знал), все нужные возможности вроде есть — пойдёт.

![Логотип Hakyll](/images/posts/2024-01-25-Hakyll-logo.png)

Haskell я, однако, за это время немного подучил, выражения в конфиге перестали быть заклинаниями, и я понял, что мне _интересно_ возиться с движком.

Не могу сказать, что это самый дружественный к новичку генератор сайтов: что такое моноид, монада и прочие стандартные хаскелевские классы типов для его тонкой настройки лучше знать. Но это очень прикольная игрушка для тех, кто сносно знает Хаскель. Вот, запилил здесь блог — не потому, что мне так уж нужен блог, а потому что возиться с Hakyll весело.

Hakyll неплохо документирован, так что я решил не делать здесь урок «как создать свой статический сайт в Hakyll за 5 минут», их и так уже достаточно. Но [исходники этого сайта](https://github.com/yashrk/yashrk.github.io-hakyll) рекомендую посмотреть, чтобы самостоятельно убедиться в нескольких вещах:

- Hakyll позволяет делать достаточно сложную логику без изобретения велосипедов (на момент написания поста в моём конфиге почти исключительно маршруты — то есть правила вида «CSS туда, HTML туда»);
- Hakyll это действительно отличный DSL для генераторов статических сайтов, без лишней эзотерики (которой, увы, полны многие популярные библиотеки для Хаскеля);
- код получается достаточно прозрачным и красивым, чтобы через несколько лет его не хотелось немедленно закрыть; зарефакторить даже кривоватый сайт на Hakyll оказывается таки проще, чем всё переписывать с нуля.

Собственно генератор сайтов это файл `site.hs`, остальное, по сути — входные данные для него или статический контент, который выкладывается как есть.
